<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Insights Into Monal Development | Monal</title><meta name=keywords content><meta name=description content="TLDR:
Info: Monal will stop support for iOS 12, iOS 13 and macOS Catalina!
We are searching for a SwiftUI developer.
We need a new simplified website.
With better continuous funding, our push servers will move from the US to Europe.
We have a new support mail: info@monal-im.org
Two years ago we decided to rewrite the Monal app almost entirely and improve it gradually in the process, instead of creating another XMPP Client for iOS and macOS."><meta name=author content="Monal"><link rel=canonical href=https://monal-im.github.io/monal-im.org/post/00001-monal-development/><link crossorigin=anonymous href=/monal-im.org/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://monal-im.github.io/monal-im.org/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://monal-im.github.io/monal-im.org/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://monal-im.github.io/monal-im.org/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://monal-im.github.io/monal-im.org/favicons/apple-icon-144x144.png><link rel=mask-icon href=https://monal-im.github.io/monal-im.org/favicons/apple-icon-precomposed.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=tr href=https://monal-im.github.io/monal-im.org/tr/post/00001-monal-development/><link rel=alternate hreflang=en href=https://monal-im.github.io/monal-im.org/post/00001-monal-development/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Insights Into Monal Development"><meta property="og:description" content="TLDR:
Info: Monal will stop support for iOS 12, iOS 13 and macOS Catalina!
We are searching for a SwiftUI developer.
We need a new simplified website.
With better continuous funding, our push servers will move from the US to Europe.
We have a new support mail: info@monal-im.org
Two years ago we decided to rewrite the Monal app almost entirely and improve it gradually in the process, instead of creating another XMPP Client for iOS and macOS."><meta property="og:type" content="article"><meta property="og:url" content="https://monal-im.github.io/monal-im.org/post/00001-monal-development/"><meta property="og:image" content="https://monal-im.github.io/monal-im.org/papermod-cover.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-07T00:00:00+00:00"><meta property="article:modified_time" content="2022-03-07T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://monal-im.github.io/monal-im.org/papermod-cover.png"><meta name=twitter:title content="Insights Into Monal Development"><meta name=twitter:description content="TLDR:
Info: Monal will stop support for iOS 12, iOS 13 and macOS Catalina!
We are searching for a SwiftUI developer.
We need a new simplified website.
With better continuous funding, our push servers will move from the US to Europe.
We have a new support mail: info@monal-im.org
Two years ago we decided to rewrite the Monal app almost entirely and improve it gradually in the process, instead of creating another XMPP Client for iOS and macOS."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://monal-im.github.io/monal-im.org/post/"},{"@type":"ListItem","position":2,"name":"Insights Into Monal Development","item":"https://monal-im.github.io/monal-im.org/post/00001-monal-development/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Insights Into Monal Development","name":"Insights Into Monal Development","description":"TLDR:\nInfo: Monal will stop support for iOS 12, iOS 13 and macOS Catalina!\nWe are searching for a SwiftUI developer.\nWe need a new simplified website.\nWith better continuous funding, our push servers will move from the US to Europe.\nWe have a new support mail: info@monal-im.org\nTwo years ago we decided to rewrite the Monal app almost entirely and improve it gradually in the process, instead of creating another XMPP Client for iOS and macOS.","keywords":[],"articleBody":" TLDR:\nInfo: Monal will stop support for iOS 12, iOS 13 and macOS Catalina!\nWe are searching for a SwiftUI developer.\nWe need a new simplified website.\nWith better continuous funding, our push servers will move from the US to Europe.\nWe have a new support mail: info@monal-im.org\nTwo years ago we decided to rewrite the Monal app almost entirely and improve it gradually in the process, instead of creating another XMPP Client for iOS and macOS. We successfully managed to transform Monal from an app that had flaws and issues with many functions to a level that promotes a user-friendly experience with working features such as push notification, group chat, and partially end-to-end encryption support (OMEMO). If you are selecting an XMPP client for Apple systems we think that Monal is a great choice nowadays. We have been investing more than a thousand hours and worked hard to overcome all the flaws, the legacy app had. We invite you to give the recent beta a try!\nThe development of Monal has not yet finished though, and many more features are hopefully to come. But due to our time constraints, it sometimes takes a bit longer than we and the community would like. We are at most two developers at the moment using our spare time to maintain Monal and develop new features. As we are developing Monal in our spare time without decent funding, it is sometimes hard to prioritize specific features. Please give this circumstance some credits.\nWhat should Monal look like in the future? To give you a bit of insight knowledge of our plans we tried to summarize the most important tasks.\nInterface (SwiftUI) In the future Monal should be easy to use. Therefore, the interface requires a proper rework and while we are at it, it should be ported to SwiftUI. While we are still improving in designing with SwiftUI, we would be glad if there is a SwiftUI \u0026 Open Source enthusiast who would like to help us with this.\nWith this transition we would like to improve the accessibility of the app as well. If you like to support an open source project, and you would like to be part of our SwiftUI journey please contact us.\nTask:\nAdd new MUC creation and management UI Port the chat view Finish contact Details List group chat (MUC) participants Display OMEMO encryption fingerprints for verification Port our settings Port all other remaining views Qualifications:\nGeneral knowledge around SwiftUI (iOS and Catalyst) Interest in improving a (XMPP) chat client Optional, but preferred: Some experience with XMPP (e.g. some weeks, or maybe months of usage of Monal or any other ‚Äúmodern‚Äù XMPP client) Optional: Experience in designing inclusive / accessible UI Website We need a modern (simplified) Hugo based website that is easier to understand, similar to Conversations, Dino or Gajim.\nIf you have some spare time, and you are a skilled in creating websites with Hugo please contact us.\nRequirements:\nSimple design nothing too fancy Privacy by design ‚Üí No analytics, no external CSS, jss, ‚Ä¶ usage OMEMO Encryption in Group Chat (MUC) We started to integrate OMEMO for group chats (MUC) into our alpha build. The receiving and sending sides are already implemented, but there are a few more steps until we can release it into the beta.\nSwitching to our new Domain monal-im.org In late 2021 we decided that we would like to have a domain with DNSSEC as our current top level domain does not support it. This domain will mainly be used for our push servers and mail servers in the future. From now on you will be able to reach us via info@monal-im.org.\nBuild server Thanks to ~20 generous donors, we were able to buy a new build server that will be used to build our alpha, beta and stable releases. Furthermore, Thilo is now finally able to debug code with a proper debugger connected to his phone.\nRedundant Push Servers We are currently using an AWS US instance for our push server that is not redundant and failed in 2021 more frequently than we liked it to. For that reason we started an internal project to auto-deploy our push server with Ansible and looked into ways for running a redundant push server setup. The first tests look promising so far, but a few more things need to be sorted out before we can switch over to our new setup.\nBefore we can switch to the new push server setup, we need a stable funding each month. We estimate that renting a VM in Germany and one at a different hoster in Finland would cost us between 16‚Ç¨ to 32‚Ç¨ each month. Without a stable funding we might not be able to afford this new setup and our push servers would stay in the US.\nThanks to our generous build server donors, we have a few bucks left that will be used as a ~5 month buffer in case of fluctuant push server funding\nPrivacy improved push servers With our current push implementation our so-called ‚Äúapp servers‚Äù see your JID (username + server), a unique but otherwise opaque device id and an opaque token generated by apple, as well as your interaction times (when you register for push notifications, timestamps when your XMPP server triggers a push notification device).\nIf you use multiple accounts on one device, the unique device id is shared across all accounts. We don‚Äôt think that this is ideal, as we know all jid‚Äôs a user is using.\nIn the future we want to try to reduce our knowledge by hiding your username from our app servers. If our idea works, we would only see that a device is registered on one or more domains and the timestamps that a push message was triggered from each domain that is used.\nAudio and Video Calls Many clients such as Conversations and Dino support audio and video calls, so Monal should be next üôÇ\nEnd-of-life: iOS 12, iOS 13 and macOS Catalina will not be supported anymore Our user group on iOS 12, iOS 13 as well as macOS Catalina has decreased in last years while the resources needed to maintain these old platforms increased. We therefore decided to focus on newer iOS versions and drop the old ones. The next stable release will only be supported on iOS 14 and higher and macOS Big Sur and higher. We are still unsure how long we will support iOS 14, as most of the devices also support iOS15.\nDonations and Support Monal is developed by volunteers and community collaboration. The work which has been done is usually not paid, and the developers need to keep up service costs and development in the future! Please consider giving a bit back for the hard work which has been conducted. Currently, there are three ways to financially support the Monal development:\nDonate via GitHub Sponsors Donate via Libera Pay EU citizens can donate via SEPA, too. Just contact Thilo Molitor via mail to info@monal-im.org to get his IBAN. Here you can read about further support of the development! Find general information in the Monal Wiki.\nTranslations We host and manage translations via Weblate.\nMany thanks! Of course, thank you very much to everyone who supported us in the past two years! üôÇ\nYou can follow us via Mastodon.\n","wordCount":"1225","inLanguage":"en","datePublished":"2022-03-07T00:00:00Z","dateModified":"2022-03-07T00:00:00Z","author":{"@type":"Person","name":"Monal"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://monal-im.github.io/monal-im.org/post/00001-monal-development/"},"publisher":{"@type":"Organization","name":"Monal","logo":{"@type":"ImageObject","url":"https://monal-im.github.io/monal-im.org/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://monal-im.github.io/monal-im.org/ accesskey=h title="Monal (Alt + H)">Monal</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></span></div><ul id=menu><li><a href=https://monal-im.github.io/monal-im.org/install/ title=Install><span>Install</span></a></li><li><a href=https://monal-im.github.io/monal-im.org/support/ title=Support><span>Support</span></a></li><li><a href=https://monal-im.github.io/monal-im.org/post/ title=Blog><span>Blog</span></a></li><li><a href=https://monal-im.github.io/monal-im.org/privacy/ title=Privacy><span>Privacy</span></a></li><li><a href=https://monal-im.github.io/monal-im.org/about/ title=About><span>About</span></a></li><li><a href=https://monal-im.github.io/monal-im.org/search/ title="Search üîç (Alt + /)" accesskey=/><span>Search üîç</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Insights Into Monal Development</h1><div class=post-meta><span title='2022-03-07 00:00:00 +0000 UTC'>07.03.2022</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;Monal&nbsp;|&nbsp;<ul class=i18n_list>Translations:<li><a href=https://monal-im.github.io/monal-im.org/tr/post/00001-monal-development/>üáπüá∑</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/monal-im/monal-im.org/tree/master/content/post/00001-monal-development.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><blockquote><p>TLDR:</p><p><em>Info: Monal will stop support for iOS 12, iOS 13 and macOS Catalina!<br>We are searching for a SwiftUI developer.<br>We need a new simplified website.<br>With better continuous funding, our push servers will move from the US to Europe.<br>We have a new support mail: info@monal-im.org</em></p></blockquote><p>Two years ago we decided to rewrite the Monal app almost entirely and improve it gradually in the process, instead of creating another XMPP Client for iOS and macOS. We successfully managed to transform Monal from an app that had flaws and issues with many functions to a level that promotes a user-friendly experience with working features such as push notification, group chat, and partially end-to-end encryption support (OMEMO). If you are selecting an XMPP client for Apple systems we think that Monal is a great choice nowadays. We have been investing more than a thousand hours and worked hard to overcome all the flaws, the legacy app had. We invite you to give the recent beta a try!</p><p>The development of Monal has not yet finished though, and many more features are hopefully to come. But due to our time constraints, it sometimes takes a bit longer than we and the community would like. We are at most two developers at the moment using our spare time to maintain Monal and develop new features. As we are developing Monal in our spare time without decent funding, it is sometimes hard to prioritize specific features. Please give this circumstance some credits.</p><h3 id=what-should-monal-look-like-in-the-future>What should Monal look like in the future?<a hidden class=anchor aria-hidden=true href=#what-should-monal-look-like-in-the-future>#</a></h3><p>To give you a bit of insight knowledge of our plans we tried to summarize the most important tasks.</p><h4 id=interface-swiftui>Interface (SwiftUI)<a hidden class=anchor aria-hidden=true href=#interface-swiftui>#</a></h4><p>In the future Monal should be easy to use. Therefore, the interface requires a proper rework and while we are at it, it should be ported to SwiftUI. While we are still improving in designing with SwiftUI, we would be glad if there is a SwiftUI & Open Source enthusiast who would like to help us with this.<br>With this transition we would like to improve the accessibility of the app as well. If you like to support an open source project, and you would like to be part of our SwiftUI journey please contact us.</p><p>Task:</p><ul><li>Add new MUC creation and management UI</li><li>Port the chat view</li><li>Finish contact Details<ul><li>List group chat (MUC) participants</li><li>Display OMEMO encryption fingerprints for verification</li></ul></li><li>Port our settings</li><li>Port all other remaining views</li></ul><p>Qualifications:</p><ul><li>General knowledge around SwiftUI (iOS and Catalyst)</li><li>Interest in improving a (XMPP) chat client</li><li>Optional, but preferred: Some experience with XMPP (e.g. some weeks, or maybe months of usage of Monal or any other ‚Äúmodern‚Äù XMPP client)</li><li>Optional: Experience in designing inclusive / accessible UI</li></ul><h4 id=website>Website<a hidden class=anchor aria-hidden=true href=#website>#</a></h4><p>We need a modern (simplified) Hugo based website that is easier to understand, similar to Conversations, Dino or Gajim.</p><p>If you have some spare time, and you are a skilled in creating websites with Hugo please contact us.</p><p>Requirements:</p><ul><li>Simple design nothing too fancy</li><li>Privacy by design ‚Üí No analytics, no external CSS, jss, ‚Ä¶ usage</li></ul><h4 id=omemo-encryption-in-group-chat-muc>OMEMO Encryption in Group Chat (MUC)<a hidden class=anchor aria-hidden=true href=#omemo-encryption-in-group-chat-muc>#</a></h4><p>We started to integrate OMEMO for group chats (MUC) into our alpha build. The receiving and sending sides are already implemented, but there are a few more steps until we can release it into the beta.</p><h4 id=switching-to-our-new-domain-monal-imorg>Switching to our new Domain monal-im.org<a hidden class=anchor aria-hidden=true href=#switching-to-our-new-domain-monal-imorg>#</a></h4><p>In late 2021 we decided that we would like to have a domain with <a href=https://en.wikipedia.org/wiki/Domain_Name_System_Security_Extensions>DNSSEC</a> as our current top level domain does not support it. This domain will mainly be used for our push servers and mail servers in the future. From now on you will be able to reach us via <a href=mailto:info@monal-im.org>info@monal-im.org</a>.</p><h4 id=build-server>Build server<a hidden class=anchor aria-hidden=true href=#build-server>#</a></h4><p>Thanks to ~20 generous donors, we were able to buy a new build server that will be used to build our alpha, beta and stable releases. Furthermore, Thilo is now finally able to debug code with a proper debugger connected to his phone.</p><h4 id=redundant-push-servers>Redundant Push Servers<a hidden class=anchor aria-hidden=true href=#redundant-push-servers>#</a></h4><p>We are currently using an AWS US instance for our push server that is not redundant and failed in 2021 more frequently than we liked it to. For that reason we started an internal project to auto-deploy our push server with Ansible and looked into ways for running a redundant push server setup. The first tests look promising so far, but a few more things need to be sorted out before we can switch over to our new setup.</p><p>Before we can switch to the new push server setup, we need a stable funding each month. We estimate that renting a VM in Germany and one at a different hoster in Finland would cost us between 16‚Ç¨ to 32‚Ç¨ each month. Without a stable funding we might not be able to afford this new setup and our push servers would stay in the US.</p><p>Thanks to our generous build server donors, we have a few bucks left that will be used as a ~5 month buffer in case of fluctuant push server funding</p><h4 id=privacy-improved-push-servers>Privacy improved push servers<a hidden class=anchor aria-hidden=true href=#privacy-improved-push-servers>#</a></h4><p>With our current push implementation our so-called ‚Äúapp servers‚Äù see your JID (username + server), a unique but otherwise opaque device id and an opaque token generated by apple, as well as your interaction times (when you register for push notifications, timestamps when your XMPP server triggers a push notification device).<br>If you use multiple accounts on one device, the unique device id is shared across all accounts. We don‚Äôt think that this is ideal, as we know all jid‚Äôs a user is using.<br>In the future we want to try to reduce our knowledge by hiding your username from our app servers. If our idea works, we would only see that a device is registered on one or more domains and the timestamps that a push message was triggered from each domain that is used.</p><h4 id=audio-and-video-calls>Audio and Video Calls<a hidden class=anchor aria-hidden=true href=#audio-and-video-calls>#</a></h4><p>Many clients such as Conversations and Dino support audio and video calls, so Monal should be next üôÇ</p><h4 id=end-of-life-ios-12-ios-13-and-macos-catalina-will-not-be-supported-anymore>End-of-life: iOS 12, iOS 13 and macOS Catalina will not be supported anymore<a hidden class=anchor aria-hidden=true href=#end-of-life-ios-12-ios-13-and-macos-catalina-will-not-be-supported-anymore>#</a></h4><p>Our user group on iOS 12, iOS 13 as well as macOS Catalina has decreased in last years while the resources needed to maintain these old platforms increased. We therefore decided to focus on newer iOS versions and drop the old ones. The next stable release will only be supported on iOS 14 and higher and macOS Big Sur and higher. We are still unsure how long we will support iOS 14, as most of the devices also support iOS15.</p><h2 id=donations-and-support>Donations and Support<a hidden class=anchor aria-hidden=true href=#donations-and-support>#</a></h2><p>Monal is developed by volunteers and community collaboration. The work which has been done is usually not paid, and the developers need to keep up service costs and development in the future! Please consider giving a bit back for the hard work which has been conducted. Currently, there are three ways to financially support the Monal development:</p><ul><li>Donate via <a href=https://github.com/sponsors/tmolitor-stud-tu>GitHub Sponsors</a></li><li>Donate via <a href=https://liberapay.com/tmolitor>Libera Pay</a></li><li>EU citizens can donate via SEPA, too. Just contact Thilo Molitor via mail to <a href=mailto:info@monal-im.org>info@monal-im.org</a> to get his IBAN.</li></ul><p>Here you can read about further <a href=https://github.com/monal-im/Monal/issues/363>support of the development</a>! Find general information in the <a href=https://github.com/monal-im/Monal/wiki>Monal Wiki</a>.</p><h4 id=translations>Translations<a hidden class=anchor aria-hidden=true href=#translations>#</a></h4><p>We host and manage translations via <a href=https://hosted.weblate.org/engage/monal/>Weblate</a>.</p><h4 id=many-thanks>Many thanks!<a hidden class=anchor aria-hidden=true href=#many-thanks>#</a></h4><p>Of course, thank you very much to everyone who supported us in the past two years! üôÇ</p><p>You can follow us via <a href=https://fosstodon.org/@Monal>Mastodon</a>.</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://monal-im.github.io/monal-im.org/>Monal</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>